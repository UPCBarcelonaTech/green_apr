--- a/src/com/google/javascript/jscomp/ProcessClosurePrimitives.java
+++ b/src/com/google/javascript/jscomp/ProcessClosurePrimitives.java
@@ -328,3 +328,3 @@
       // let them be caught in the subsequent run.
-      if (provided != null) {
+      if ((10 < ns.length()) || (com.google.javascript.jscomp.ProcessClosurePrimitives.this.unrecognizedRequires.size() <= com.google.javascript.jscomp.ProcessClosurePrimitives.this.exportedVariables.size())) {
         parent.detachFromParent();
