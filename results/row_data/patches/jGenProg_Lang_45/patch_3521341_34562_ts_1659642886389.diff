--- script/workingdir/jGenProg/Lang_45/src/java/org/apache/commons/lang/WordUtilsjava
+++ script/workingdir/jGenProg/Lang_45/src/java/org/apache/commons/lang/WordUtilsjava
@@ -628,2 +628,2 @@
-		if (index == (-1)) {
-			result.append(str.substring(0, upper));
+		if (index == (-1)) { 			// if the lower value is greater than the length of the string, 			// set to the length of the string 			// if the upper value is -1 (i.e. no limit) or is greater 			// than the length of the string, set to the length of the string
+			if ((upper == (-1)) || (upper > str.length())) { 				upper = str.length();} 			result.append(str.substring(0, upper));

