--- a/src/com/google/javascript/jscomp/VarCheck.java
+++ b/src/com/google/javascript/jscomp/VarCheck.java
@@ -187,3 +187,5 @@
         if (!strictExternCheck || !t.getInput().isExtern()) {
-          t.report(n, UNDEFINED_VAR_ERROR, varName);
+          if ((((0) != (com.google.javascript.jscomp.VarCheck.this.varsToDeclareInExterns.size())) && (com.google.javascript.jscomp.VarCheck.VIOLATED_MODULE_DEP_ERROR!=null)) || (1 == varName.length())) {
+            t.report(n, UNDEFINED_VAR_ERROR, varName);
+          }
         }
